<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ring HUD</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,300..700,0..1,-50..200" />
    <style>
        /* ============================================
           MAIN RULES FOR TRANSPARENCY
           ============================================ */
        :root {
            --ring-size: 54px;
            --stroke-width: 7px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* REQUIRED: Transparent background */
        html, body {
            background: transparent !important;
            background-color: transparent !important;
        }
        
        body {
            color: #fff;
            font-family: sans-serif;
        }
        
        /* ============================================
           CONTAINER - No Background
           ============================================ */
        .panel {
            position: absolute;
            right: 0;
            bottom: 0;
            padding: 10px;
            /* NO background here */
        }
        
        /* ============================================
           RING COMPONENTS
           ============================================ */
        .row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .ring {
            position: relative;
            width: var(--ring-size);
            height: var(--ring-size);
        }
        
        .ring svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        
        .ring .bg {
            stroke: rgba(255, 255, 255, 0.15);
        }
        
        .ring .fg {
            transition: stroke-dashoffset 300ms ease;
            stroke-linecap: round;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }
        
        .ring .label {
            position: absolute;
            inset: 0;
            display: grid;
            place-items: center;
        }
        
        .material-symbols-outlined {
            color: #ffffff;
            font-size: 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        /* Health Ring - Red */
        .hp .fg {
            stroke: #ef5350;
        }
        
        /* Armor Ring - Blue */
        .armor .fg {
            stroke: #42a5f5;
        }
    </style>
</head>
<body>
    <div class="panel">
        <div class="row">
            <!-- Health Ring -->
            <div class="ring hp">
                <svg viewBox="0 0 100 100">
                    <circle class="bg" cx="50" cy="50" r="44" 
                            stroke-width="10" fill="none"/>
                    <circle class="fg" cx="50" cy="50" r="44" 
                            stroke-width="10" fill="none"
                            stroke-dasharray="276" stroke-dashoffset="0"
                            id="hpRing"/>
                </svg>
                <div class="label">
                    <span class="material-symbols-outlined">favorite</span>
                </div>
            </div>
            
            <!-- Armor Ring -->
            <div class="ring armor">
                <svg viewBox="0 0 100 100">
                    <circle class="bg" cx="50" cy="50" r="44" 
                            stroke-width="10" fill="none"/>
                    <circle class="fg" cx="50" cy="50" r="44" 
                            stroke-width="10" fill="none"
                            stroke-dasharray="276" stroke-dashoffset="276"
                            id="armorRing"/>
                </svg>
                <div class="label">
                    <span class="material-symbols-outlined">shield</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const CIRCUMFERENCE = 2 * Math.PI * 44; // ~276
        
        function setRingValue(ringId, percent) {
            const ring = document.getElementById(ringId);
            if (!ring) return;
            
            percent = Math.max(0, Math.min(100, percent));
            const offset = CIRCUMFERENCE * (1 - percent / 100);
            ring.setAttribute('stroke-dashoffset', offset.toFixed(2));
        }
        
        // Called from server
        function setHealth(percent) {
            setRingValue('hpRing', percent);
        }
        
        function setArmor(percent) {
            setRingValue('armorRing', percent);
        }
        
        // To receive data from geckoju bridge
        if (window.geckoju) {
            window.geckoju.onData = function(data) {
                try {
                    const obj = JSON.parse(data);
                    if (obj.health !== undefined) setHealth(obj.health);
                    if (obj.armor !== undefined) setArmor(obj.armor);
                } catch(e) {}
            };
        }
    </script>
</body>
</html>
